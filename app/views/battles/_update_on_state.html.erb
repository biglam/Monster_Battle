<script>
var checkState = function(){
  var rubystate = "<%= @battle.state %>";
  jsondata = $.get( "edit.json", function( data ) {
    console.log("ajax - " + jsondata.responseJSON.state);
    console.log("ruby - " + rubystate);
    console.log(" ");
    if (jsondata.responseJSON.state != rubystate) {
      window.location.reload(1);
    };
  });
};
</script>
<script>
   window.setInterval(function(){
     checkState();
   }, 2000);
</script>